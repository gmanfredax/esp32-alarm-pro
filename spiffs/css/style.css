:root{
  --bg:#0b1220;
  --panel:#0f172a;
  --panel-2:#0a1224;
  --border:#1f2a44;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22d3ee;
  --accent-2:#10b981;
  --danger:#ef4444;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Apple Color Emoji','Segoe UI Emoji';
  background: radial-gradient(1200px 800px at 20% -10%, #0d1b3a 0%, transparent 60%) , var(--bg);
  color:var(--text);
}

/* util */
.hidden { display: none !important; }
body.modal-open { overflow: hidden; }

/* overlay scuro sopra tutta la pagina */
.cover{position:fixed; inset:0; background:rgba(0,0,0,.25); backdrop-filter:blur(2px); z-index:950}

/* menÃ¹ utente */
.user.open .user-menu { display:block; }
.user-menu {
  position:absolute; right:0; top:calc(100% + .5rem);
  min-width: 180px; background:var(--panel-bg,#0f1824); border:1px solid rgba(255,255,255,.06);
  border-radius:.6rem; box-shadow:0 10px 30px rgba(0,0,0,.3); z-index:999;
}
.user-menu button {
  width:100%; text-align:left; background:transparent; border:0; padding:.7rem .9rem; color:#cfe6ff;
}
.user-menu button:hover { background:rgba(255,255,255,.06); }
/* User dropdown */
.user.user-menu { position: relative; }
.user-btn { background: transparent; border: 0; color: var(--fg,#cfe6ff); display:flex; gap:.4rem; align-items:center; }
.dropdown {
  position: absolute; right: 0; top: calc(100% + .5rem);
  min-width: 200px; background: var(--panel-bg,#0f1824);
  border: 1px solid rgba(255,255,255,.06); border-radius: .6rem;
  box-shadow: 0 12px 30px rgba(0,0,0,.35); z-index: 999;
}
.dropdown.hidden { display: none; }
.dropdown > button {
  width: 100%; text-align: left; background: transparent; border: 0;
  padding: .7rem .9rem; color: #cfe6ff;
}
.dropdown > button:hover { background: rgba(255,255,255,.06); }
.dropdown button{
  display:block; width:100%; text-align:left; padding:.6rem .8rem; border:0; background:transparent; color:#cfd7e6; border-radius:10px; cursor:pointer;
}
.dropdown button:hover{background:rgba(255,255,255,.06); color:#fff}

/* modali generiche */
.modal-overlay{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:9999; backdrop-filter:blur(3px); background:rgba(0,0,0,.15)}
.modal{min-width:340px; max-width:min(92vw,520px)}
.form .row{display:flex; gap:.5rem; align-items:center}
.form .field{display:flex; flex-direction:column; gap:.35rem; margin:.35rem 0}
.form .field span{font-size:.85rem; opacity:.8}

/* pannello login centrato */
.login-panel {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: end center;            /* in basso come nel tuo mock */
  padding: 2rem 1rem;
  z-index: 1000;
}
.login-card {
  width: min(920px, 96vw);
  margin: 0 auto;
  border-radius: 18px;
  /* riusa le tue classi .card (ombre, bordi) */
}
.login-card .field input { width:100%; }

.login-card h3 { margin: 0 0 .75rem; }
.login-card .row { display: flex; gap: .75rem; align-items: center; }
.login-card .actions { justify-content: flex-start; margin-top: .75rem; }
.msg.small{font-size:.85rem; opacity:.9}

.container{max-width:1120px;margin:0 auto;padding:0 20px}
.site-header{
  position:sticky;top:0;z-index:20;
  background:linear-gradient(to bottom, rgba(12,20,40,.9), rgba(12,20,40,.6));
  border-bottom:1px solid var(--border);
  backdrop-filter:saturate(140%) blur(6px);
}
.head-inner{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
.brand{display:flex;align-items:center;gap:10px;font-weight:600}
.brand-name{letter-spacing:.2px}
/*.user{display:flex;align-items:center;gap:10px;color:#cbd5e1;font-size:.9rem}*/
.user { position:relative; cursor:pointer; }

.ico{width:22px;height:22px;color:var(--accent)}
.ico.s{width:18px;height:18px}
.ico.ok{color:var(--accent-2)}

.btn{
  border:1px solid var(--border);background:var(--panel);color:var(--text);
  padding:.5rem .9rem;border-radius:12px;cursor:pointer;transition:.2s;
}
.btn.outline{background:transparent}
.btn.small{padding:.35rem .6rem;font-size:.85rem;border-radius:10px}
.btn.primary{border-color:transparent;background:linear-gradient(180deg, #20e0ff, #0ea5b7);color:#00141e;font-weight:600;}
.btn:hover{transform:translateY(-1px)}

.main{padding:28px 0}
.tabs{display:flex;gap:10px}
.tab-btn{
  cursor: pointer;
  border:1px solid var(--border);background:#0d1525;color:#d1d5db;
  padding:.55rem 1rem;border-radius:12px;font-size:.9rem;letter-spacing:.2px;
}
.tab-btn.active{border-color:#22d3ee;color:#a5f3fc;background:#0c2440}

.tab{display:none;margin-top:16px}
.tab.active{display:block}

/* Cards & grids */
.card{
  color: var(--text);
  border:1px solid var(--border);
  background:linear-gradient(180deg, rgba(21,31,56,.9), rgba(10,18,36,.9));
  border-radius:16px;padding:16px;
  box-shadow: 0 8px 24px rgba(0,0,0,.28);
  margin: 5px;
}
.card.mini{padding:12px}

.kpi-grid{display:grid;grid-template-columns:repeat(1,1fr);gap:16px}
@media(min-width:640px){.kpi-grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:960px){.kpi-grid{grid-template-columns:repeat(3,1fr)}}

.kpi{display:grid;gap:6px}
.kpi-title{color:var(--muted);font-size:.85rem;letter-spacing:.3px}
.kpi-value{font-size:1.8rem;font-weight:700;display:flex;align-items:center;gap:8px}

.tag{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);padding:.2rem .5rem;border-radius:999px;font-size:.9rem}
.tag.ok{background:rgba(16,185,129,.15);border-color:rgba(16,185,129,.45);color:#c7f9d4}

.zones-grid{display:ruby;grid-template-columns:repeat(2,1fr);gap:12px}
/* Badge nelle card zona (RA/RC/AE) */
.zones-grid .chip { position: relative; padding-right: 3.2rem; min-width: 200px;}
.zones-grid .badges { position:absolute; top:.35rem; right:.35rem; display:flex; gap:.25rem; }
.badge { font-size:.62rem; line-height:1; padding:.18rem .32rem; border-radius:.3rem;
  background:rgba(120,160,200,.18); border:1px solid rgba(120,160,200,.35); }
@media(min-width:640px){.zones-grid{grid-template-columns:repeat(3,1fr)}}
@media(min-width:960px){.zones-grid{grid-template-columns:repeat(6,1fr)}}

.chip{display:inline-block;border:1px solid var(--border);padding:.4rem .7rem;border-radius:12px}
.chip.on{background:var(--accent);color:#00152a;border-color:var(--accent)}

.scenes-list{display:grid;gap:16px}
.card-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.card-head .title{display:flex;align-items:center;gap:8px}
.card-head h2{margin:0;font-size:.95rem;letter-spacing:.6px; text-transform:uppercase}

.checks{display:flex;flex-wrap:wrap;gap:8px}
.chk{display:flex;gap:6px;align-items:center;background:#0d1525;border:1px solid var(--border);padding:.45rem .6rem;border-radius:10px}
.chk input{accent-color:#22d3ee;width:16px;height:16px}

.foot{padding:26px 0 40px;color:#9aa5b1;font-size:.8rem}


/* --- Stato PRE_ARM / PRE_DISARM --- */
@keyframes blinkFade { 50% { opacity: .35; } }
.blink { animation: blinkFade 1s linear infinite; }
.countdown { font-variant-numeric: tabular-nums; margin-left:.35rem; }
.input-error { outline: 2px solid var(--danger); border-color: var(--danger) !important; }

/* Wizard iniziale ---------------------------------------------------------- */
.setup-wizard{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:1.5rem;background:rgba(4,10,24,.8);backdrop-filter:blur(8px);z-index:1200}
.setup-wizard.hidden{display:none}
.wizard-card{width:min(720px,96vw);background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:1.8rem;box-shadow:0 28px 60px rgba(0,0,0,.45);display:flex;flex-direction:column;gap:1.2rem;position:relative;color:var(--text)}
.wizard-close{position:absolute;top:.9rem;right:.9rem;background:transparent;border:0;color:var(--muted);font-size:1.5rem;cursor:pointer}
.wizard-close:hover{color:#fff}
.wizard-progress{display:flex;gap:.45rem}
.wizard-progress span{flex:1;height:4px;border-radius:999px;background:rgba(255,255,255,.08);transition:background .25s ease}
.wizard-progress span.active{background:linear-gradient(90deg,var(--accent),var(--accent-2))}
.wizard-content{display:flex;flex-direction:column;gap:.75rem}
.wizard-step-icon{font-size:2.4rem}
.wizard-step-icon.hidden{display:none}
.wizard-step-title{margin:0;font-size:1.55rem;letter-spacing:.4px}
.wizard-step-body{color:var(--muted);font-size:.95rem;line-height:1.55}
.wizard-step-body ul{padding-left:1.2rem;margin:.6rem 0 0}
.wizard-step-body li{margin:.3rem 0}
.wizard-actions{display:flex;justify-content:space-between;align-items:center;gap:.75rem;flex-wrap:wrap}
.wizard-actions-nav{display:flex;gap:.6rem}
.wizard-skip{background:transparent;border:0;color:var(--muted);cursor:pointer;text-decoration:underline;font-size:.9rem;padding:.4rem .2rem}
.wizard-skip:hover{color:#fff}
body.wizard-open{overflow:hidden}

@media (max-width:520px){
  .wizard-card{padding:1.3rem}
  .wizard-step-title{font-size:1.4rem}
  .wizard-actions{flex-direction:column;align-items:stretch}
  .wizard-actions-nav{width:100%;justify-content:space-between}
  .wizard-actions-nav .btn{flex:1}
}